<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sumit Coffee Reactor</title>
<style>
/* ===== Body & Theme ===== */
body {
    margin: 0;
    font-family: monospace;
    background: radial-gradient(circle at center, #111 0%, #000 90%);
    color: #00ffe7;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}
h1 {
    margin-top: 20px;
    font-size: 28px;
    text-shadow: 0 0 15px #00ffe7;
}
#gameContainer {
    width: 320px;
    height: 420px;
    border: 3px solid #00ffe7;
    border-radius: 20px;
    margin-top: 20px;
    overflow: hidden;
    position: relative;
    background: #111;
    box-shadow: 0 0 20px #00ffe7;
}
/* ===== Stages ===== */
.stage {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0; left: 0;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #00ffe7;
}
button {
    padding: 10px 20px;
    margin-top: 15px;
    font-size: 16px;
    border: none;
    border-radius: 20px;
    background: #00ffe7;
    color: black;
    cursor: pointer;
    box-shadow: 0 0 10px #00ffe7;
}
.progressBar {
    width: 80%;
    height: 20px;
    background: #222;
    border-radius: 10px;
    overflow: hidden;
    margin-top: 15px;
}
.progressFill {
    height: 100%;
    width: 0%;
    background: linear-gradient(to right, #ff4d6d, #ff8fa3);
    border-radius: 10px;
    transition: width 0.1s linear;
}
.message {
    margin-top: 10px;
    font-size: 14px;
    min-height: 20px;
    text-align: center;
}
#coffeeCup {
    width: 120px;
    height: 160px;
    background: #552200;
    border-radius: 60px 60px 10px 10px;
    position: relative;
    overflow: hidden;
    margin-top: 15px;
    box-shadow: 0 0 15px #ff8fa3 inset;
}
#milkFoam {
    width: 100%;
    height: 0%;
    background: #fff;
    position: absolute;
    bottom: 0;
    border-radius: 60px 60px 0 0;
    transition: height 0.2s;
}
.heart {
    font-size: 50px;
    display: none;
    margin-top: 15px;
    animation: beat 1s infinite;
}
@keyframes beat {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.3); }
}
</style>
</head>
<body>

<h1>â˜• Sumit Coffee Reactor</h1>
<div id="gameContainer">

    <!-- Stage 1: Espresso Extraction -->
    <div class="stage" id="stage1">
        <p>Step 1: Brew Espresso</p>
        <div class="progressBar">
            <div class="progressFill" id="extractProgress"></div>
        </div>
        <button id="brewBtn">Tap & Hold to Brew</button>
        <div class="message" id="msg1"></div>
    </div>

    <!-- Stage 2: Milk Frothing -->
    <div class="stage" id="stage2">
        <p>Step 2: Froth Milk</p>
        <div id="coffeeCup">
            <div id="milkFoam"></div>
        </div>
        <button onclick="startFroth()">Froth Milk</button>
        <div class="message" id="msg2"></div>
    </div>

    <!-- Stage 3: Latte Art -->
    <div class="stage" id="stage3">
        <p>Step 3: Latte Art</p>
        <button onclick="addArt('â¤')">Heart</button>
        <button onclick="addArt('â˜•')">Cup</button>
        <button onclick="addArt('â˜…')">Star</button>
        <div class="message" id="msg3"></div>
        <div class="heart" id="finalHeart">ðŸ’“</div>
    </div>

</div>

<button id="startGame" onclick="startGame()">Activate Reactor</button>

<script>
let stage = 0;
let brewing = false;
let brewWidth = 0;

function startGame() {
    document.getElementById('startGame').style.display = 'none';
    nextStage();
}

// ===== Stage Navigation =====
function nextStage() {
    stage++;
    document.querySelectorAll('.stage').forEach(s => s.style.display = 'none');
    document.getElementById('stage'+stage).style.display = 'flex';
}

// ===== Espresso Brewing =====
const brewBtn = document.getElementById('brewBtn');
brewBtn.addEventListener('touchstart', startBrewing);
brewBtn.addEventListener('mousedown', startBrewing);
brewBtn.addEventListener('touchend', stopBrewing);
brewBtn.addEventListener('mouseup', stopBrewing);

function startBrewing() {
    brewing = true;
    document.getElementById('msg1').innerText = "Espresso brewing...";
    brewProgress();
}

function stopBrewing() {
    brewing = false;
}

function brewProgress() {
    if(brewing && brewWidth < 100) {
        brewWidth++;
        document.getElementById('extractProgress').style.width = brewWidth + "%";
        setTimeout(brewProgress, 30);
    }
    if(brewWidth >= 100) {
        document.getElementById('msg1').innerText = "Espresso Ready! AI: Extraction perfect!";
        setTimeout(nextStage, 1000);
    }
}

// ===== Milk Frothing =====
function startFroth() {
    let foam = document.getElementById('milkFoam');
    let height = 0;
    document.getElementById('msg2').innerText = "Frothing milk...";
    let interval = setInterval(() => {
        if(height >= 100) {
            clearInterval(interval);
            document.getElementById('msg2').innerText = "Milk Perfect! AI: Froth expert detected!";
            setTimeout(nextStage, 1000);
        } else {
            height += 5;
            foam.style.height = height + "%";
        }
    }, 200);
}

// ===== Latte Art =====
function addArt(symbol) {
    document.getElementById('msg3').innerText = `Latte Art: ${symbol} created! AI: Barista Master Detected!`;
    document.getElementById('finalHeart').style.display = 'block';
}
</script>

</body>
</html>
